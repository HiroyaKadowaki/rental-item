<%= render "devise/shared/header" %>


<div class='lists'>
  <% if user_signed_in? %>
    <%#div class='category'>
      <%= form_for @category do |s| %>
        <%#div class='category-name'>
          <%= s.collection_select :id, Category.all, :id, :name, {}, {class:'category-title'} %>
        <%#div>
      <% end %>
      <div class='cate'>
      <%= link_to "カテゴリー追加", new_category_path, class:'category-create' %>
      </div>
    <%#/div%>
    <h2 class='title'>備品一覧</h2>
    <div class='item-title'>
      <div class='item-number'>
        <h4>備品番号</h4>
      </div>
      <div class='item-name'>
        <h4>備品の名前</h4>
      </div>
      <div class='item-rental'>
        <h4>貸し出し状況</h4>
      </div>
    </div>
    <% @items.each do |item| %>
    <ul class="item-summary">
      <li class='item-lists'>
        <div class='item-number'>
          <%= item.number %>
        </div>
        <div class='item-name'>
          <%= link_to item.name, item_path(item) %>
        </div>
        <div class='item-rental'>
          <% if item.rental != nil %>
            <% if current_user.id == item.rental.user_id %>
              <%= link_to "返却", item_rental_path(item.rental.item_id, item.rental.id), method: :delete, class:'on-loan' %>
            <% else %>
              <%= link_to "貸し出し中", user_path(item.rental.user_id), class:'on-loan' %>
            <% end %>
          <% else %>
            <%= form_with model: @rental, url: item_rentals_path(item.id), local: true do |f| %>
              <%= f.submit "貸し出し可" ,class:'rental-path' %>
            <% end %>
          <% end %>
        </div>
      </li>
    </ul>
    <% end %>
  <% end %>
</div>

<%= render "devise/shared/footer" %>
